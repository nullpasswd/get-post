<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- META/PAGE INFO -->
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>GET/POST Test Server</title>

    <!-- EXTERNAL STYLES -->
    <link
      href="https://cdn.jsdelivr.net/gh/SebastianAigner/twemoji-amazing@1.1.0/twemoji-amazing.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://necolas.github.io/normalize.css/8.0.1/normalize.css"
    />

    <!-- GOOGLE FONTS -->
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com"
    />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin="true"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=JetBrains+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap"
      rel="stylesheet"
    />

    <!-- LOCAL STYLES -->
    <link
      rel="stylesheet"
      href="/css/themes/dark.css"
    />
    <link
      rel="stylesheet"
      href="/css/global.css"
    />
  </head>
  <body class="dark">
    <main>
      <header>
        <h1>GET/POST test server</h1>
        <p>Stupid-simple server for all things network requests <i class="twa twa-globe-with-meridians"></i></p>
      </header>
      <section>
        <p>This is a webserver made with <a href="https://sanic.dev">Sanic</a> that&apos;s used to test GET and POST requests with things like forms and the like.</p>
        <p>I originally made this in JavaScript as a way to help my college professor in a course of the same name as that language as we dove into forms and whatnot. I've now spent some time learning Python and I am confident to say that I'm quite impressed with the results. Seriously &mdash; take a look at the <a href="https://github.com/nullpasswd/get-post-test">GitHub</a> to see it all!</p>
      </section>
      <section>
        <h1>Quickstart</h1>
        <p>To get started, set the form's method to either <b>GET</b> or <b>POST</b>. Other than using some spicy JavaScript magic (awesome) or your web browser (lame) to handle the data response, you're all set.</p>
        <p>You can use this JavaScript to add an event listener for this site's API, assuming your form has the <code>sampleForm</code> ID:</p>
        <pre><code>
function formSubmit(event, element) {
  var url = 'https://get-post.nullpasswd.github.io/api';
  var request = new XMLHttpRequest();

  request.open(element.getAttribute('method'), url, true);

  request.onload = () => {
    // handle the data.
    // this is just an example that iterates through the response in JSON format and prints each key-value pair
    if (request.status != 200) return alert(`Error ${request.status}: ${request.statusText}`);

    var data = JSON.parse(request.responseText);
    for (var key in data) {
      if (data.hasOwnProperty(key)) console.log(`${key}: ${data[key]}`);
    }
  };

  request.send(new FormData(event.target));
  event.preventDefault();
}

function attachFormSubmitEvent(formId) {
  document.getElementById(formId).addEventListener('submit', (event) => formSubmit(event, document.getElementById(formId)));
}

attachFormSubmitEvent('sampleForm');
        </code></pre>
        <p>Or, you can just set the <code>action</code> parameter on your form to simply direct to the raw JSON output for your form.</p>
      </section>
    </main>
  </body>
</html>
